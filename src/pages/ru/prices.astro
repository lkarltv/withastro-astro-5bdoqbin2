---
import Layout from '../../layouts/Layout.astro';
import pricingData from '../../data/pricing.json';

const lang = 'ru';

// FIX: Added ': any' to silence the TypeScript error
const getPrice = (item: any) => item.price && (item.price[lang] || item.price['et']);
---

<Layout title="Price List - GP Ülle Lomp" lang={lang}>
    <section class="max-w-4xl mx-auto px-4 py-12">
        <h1 class="text-4xl font-light text-center tracking-wide text-medical-dark mb-4">Прейскурант</h1>
        <p class="text-center text-gray-600 mb-12">Оплата услуг производится только <span class="font-bold">наличными</span></p>

        <div class="space-y-8">
            {pricingData.items.map((category) => (
                <div class="bg-medical-sage/20 rounded-3xl shadow-sm p-8 md:p-12">
                    <h2 class="text-2xl font-bold text-medical-sage mb-8 border-b border-medical-sage/30 pb-4">
                        {category.category[lang]}
                    </h2>
                    
                    <ul class="space-y-4">
                        {category.items.map((item) => {
                            const priceStr = getPrice(item);
                            return (
                                <li class="flex items-baseline justify-between w-full group">
                                    {/* Item Name */}
                                    <span class="text-medical-dark font-medium pr-2">
                                        {item.name[lang]}
                                    </span>

                                    {/* Dotted Line (Only if there is a price) */}
                                    {priceStr && (
                                        <span class="flex-grow border-b-2 border-dotted border-gray-400/50 mx-2 relative -top-1"></span>
                                    )}

                                    {/* Price (Only if there is a price) */}
                                    {priceStr && (
                                        <span class="font-bold text-gray-800 pl-2 whitespace-nowrap">
                                            {priceStr}
                                        </span>
                                    )}
                                </li>
                            );
                        })}
                    </ul>
                </div>
            ))}
        </div>
    </section>
</Layout>